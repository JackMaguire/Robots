// g++ benchmark_recursion.cc -std=c++2a -o benchmark_recursion -Wall -pedantic -Wshadow
// g++ benchmark_recursion.cc -std=c++2a -o benchmark_recursion -Wall -pedantic -Wshadow -g -D_GLIBCXX_DEBUG

#include "robots.hh"
#include "recursion.hh"

#include <array>

#include <string>
//#include <fstream>
#include <stdio.h>
#include <iostream>
//#include <cstdlib> //rand()

#include <chrono>

/*int main(){

  bool any_cascade = false;

  for( int i = 0; i < 5; ++i ){
    RobotsGame< NullVisualizer, false, 0 > game( 1, 0 );
    auto result = recursive_search_for_cascade< 10 >( game.board() );
    any_cascade |= result.cascade;
  }
  
  std::cout << any_cascade << std::endl;

}*/

void run( std::string const & s ){

  Board const b( s );

  for( int i = 0; i < 5; ++i ){
    auto const start = std::chrono::system_clock::now();
    auto const result = recursive_search_for_cascade< 6 >( b );
    auto const end = std::chrono::system_clock::now();
    auto const elapsed = std::chrono::duration_cast<std::chrono::milliseconds>( end - start );
    std::cout << "time: " << elapsed.count() << " ms result: " << result.cascade << std::endl;
  }
}

int main(){

  run( "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000200000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000" );

  run( "000300000000000000000000000000000000000000000000000000000000000000000000000000000300000000000000000000000000000000000000000000000000000000000300000000000000030300000000000300000000000000000000000000000000000000000000000000000000000000000000000000333030000000003000000000000000003330000000000000000000000300030003003033000000000000030301030030001010000000000000000000030000000000000000000000000010000001030000000300000000000000301300100101000020000000003010000300001000000000000000000000300300000000000000000000000000000000000000000300000000003000000300010000000300000000000000030000000000000300000000000010003000010000000000000000000000310300000000000000000000000000030000000000000000000000000000000000000000000300000000003010033000000000000000000000000000303000000010000300000000000010000300000100000000000000000010030300010000000000000000000010030000000000000000000000000010003300001000000000000000000010300300010000000300000000000010030000011000000000000000000001000000003000003000000000000000000300000000000300000000000000300000003000000300000000000000033000000000000000000000000000030000000000000000000000000000333300000000000000000000000000000000000000000000000000000000033300000000000000000000000000000000000000000000000000000000003000000000000000000000000000303000000000000000000000000000300000000030000030000000000000300000030000030000000000" );

 run( "000000000000000000000000000000000000000000030000000003000000000000330000000000000000000000000000000001001000100011000000000000000011001000010010000000000000030000010000101010000000000003010110100010011001000000030000000011011000000100000000000000001000000000101001000000000000000011001000000010010000000000000011000000001100000000000000301010000000001100010000000000000111011100000001000000000000000011010010010000010000000003300011101000111010100000030000001111000000001100010000000003030001003000000100010000000000000010000000000010000000000000000011003000000110000000000000300100100000010000000000000000300110000000001000000000000000000000000000000001110000000000010011001100001000000000000003010000000000000010100000030000333031100000000300000000000000000010111100011101000000000000310000011010110000010000000000001000000000011110000000000000010000101010100000110000000000000010001000000000000000000003010011003001000001000000000000000010010000000101000000000003300010000000011000000000030000330010100000000000000000000000000011100000010010000000000000000000001000001101000000000000310013310110331100130020000000001300030110300013000000000003300303000000003000000000000000000000000000000000000000000000300000000000000000000000000000000000000000000000000000000003000000000000000000000000000003000000000000000000000000000000003300300000000030000000" );

}
